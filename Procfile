web: bash -lc 'set -euo pipefail; echo "[EB] Working dir: $(pwd)"; ls -la; if [ -f backend/api/dist/main.js ]; then echo "[EB] dist present, starting"; npm --prefix backend/api ci --omit=dev; node backend/api/dist/main.js; else echo "[EB] dist missing, attempting build"; npm --prefix backend/api ci --omit=dev; if [ -f backend/api/tsconfig.json ]; then npm --prefix backend/api run build; node backend/api/dist/main.js; else echo "[EB] ERROR: dist missing and no source to build (no tsconfig.json)"; ls -la backend/api || true; exit 1; fi; fi'